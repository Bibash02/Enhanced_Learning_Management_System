<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:"Times New Roman", sans-serif; }
    body { display:flex; justify-content:center; align-items:center; min-height:100vh; background:#f4f4f4; }
    .checkout-container { display:flex; width:900px; background:#fff; box-shadow:0 8px 20px rgba(0,0,0,0.15); border-radius:10px; overflow:hidden; }
    .billing, .summary { flex:1; padding:40px; }
    .billing h2, .summary h2 { font-size:26px; margin-bottom:20px; font-family:"Times New Roman", serif; }
    .form-group { margin-bottom:20px; }
    .form-group label { display:block; font-size:14px; margin-bottom:5px; color:#333; }
    .form-group input, .form-group select { width:100%; padding:12px; border:1px solid #ccc; border-radius:5px; outline:none; font-size:14px; }
    .btn-pay { width:100%; padding:12px; background:#10b981; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:15px; margin-top:15px; transition:0.3s; }
    .btn-pay:hover { background:#0c9463; }
    .summary { background:#f7f7f7; }
    .summary .item { display:flex; justify-content:space-between; margin-bottom:10px; }
    .summary .total { display:flex; justify-content:space-between; font-weight:bold; font-size:18px; margin-top:20px; border-top:1px solid #ccc; padding-top:10px; }
    .payment-info { margin-top:15px; padding:10px; background:#e2f7e1; border-radius:5px; display:none; }
    @media(max-width:900px){ .checkout-container{ flex-direction:column; width:90%; } }
  </style>
</head>
<body>
  <div class="checkout-container">
    <div class="billing">
      <h2>Billing Details</h2>
      <form action="{% url 'process_payment' %}" method="POST">
        {% csrf_token %}
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" name="name" value="{{ request.user.get_full_name }}" required>
        </div>
        <div class="form-group">
          <label>Email Address</label>
          <input type="email" name="email" value="{{ request.user.email }}" required>
        </div>
        <div class="form-group">
          <label>Phone Number</label>
          <input type="text" name="phone" placeholder="9801234567" required>
        </div>
        <div class="form-group">
          <label>Address</label>
          <input type="text" name="address" placeholder="Enter your address" required>
        </div>
        <div class="form-group">
          <label>City</label>
          <input type="text" name="city" placeholder="Kathmandu" required>
        </div>
        <div class="form-group">
          <label>Country</label>
          <input type="text" name="country" value="Nepal" required>
        </div>
        <div class="form-group">
          <label>Payment Type</label>
          <select name="payment_type" id="paymentType" required>
            <option value="">-- Select Payment Type --</option>
            <option value="cod">Cash on Delivery</option>
            <option value="esewa">eSewa</option>
          </select>
        </div>

        <div id="codInfo" class="payment-info">You will pay the total amount to the delivery person.</div>
        <div id="esewaInfo" class="payment-info">After clicking proceed, you will be redirected to eSewa sandbox.</div>

        <input type="hidden" name="course_id" value="{{ course.id }}">
        <input type="hidden" name="course_name" value="{{ course.title }}">
        <input type="hidden" name="amount" value="{{ course.price }}">
        <input type="hidden" name="total_amount" value="{{ total_amount }}">

        <button type="submit" class="btn-pay">Proceed to Payment</button>
      </form>
    </div>

    <div class="summary">
      <h2>Order Summary</h2>
      <div class="item"><span>{{ course.title }}</span><span>Rs.{{ course.price }}</span></div>
      <div class="item"><span>Service Charge</span><span>Rs.50</span></div>
      <div class="total"><span>Total</span><span>Rs.{{ total_amount }}</span></div>
    </div>
  </div>

  <script>
    const paymentType = document.getElementById("paymentType");
    const codInfo = document.getElementById("codInfo");
    const esewaInfo = document.getElementById("esewaInfo");

    paymentType.addEventListener("change", function() {
      codInfo.style.display = "none";
      esewaInfo.style.display = "none";
      if (this.value === "cod") codInfo.style.display = "block";
      if (this.value === "esewa") esewaInfo.style.display = "block";
    });
  </script>
</body>
</html> -->


<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Checkout</title></head>
<body>
  <div class="checkout-container">
    <div class="billing">
      <h2>Billing Details</h2>
      <form action="{% url 'process_payment' %}" method="POST">
        {% csrf_token %}
        <input type="text" name="name" value="{{ request.user.get_full_name }}" required>
        <input type="email" name="email" value="{{ request.user.email }}" required>
        <input type="text" name="phone" placeholder="980.." required>
        <input type="text" name="address" placeholder="Address" required>
        <input type="text" name="city" placeholder="City" required>
        <input type="text" name="country" value="Nepal" required>

        <select name="payment_type" id="paymentType" required>
          <option value="">--Select--</option>
          <option value="cod">Cash on Delivery</option>
          <option value="esewa">eSewa</option>
        </select>

        <input type="hidden" name="course_id" value="{{ course.id }}">
        <input type="hidden" name="course_name" value="{{ course.title }}">
        <input type="hidden" name="amount" value="{{ course.price }}">
        <input type="hidden" name="total_amount" value="{{ total_amount }}">

        <button type="submit">Proceed to Payment</button>
      </form>
    </div>

    <div class="summary">
      <h2>Order Summary</h2>
      <div>{{ course.title }} - Rs.{{ course.price }}</div>
      <div>Service Charge - Rs.50</div>
      <div>Total - Rs.{{ total_amount }}</div>
    </div>
  </div>
</body>
</html>
